### 1. Identify the Wrong Behavior Involved in `GitHub Problem Description`
The issue described is that when a sub-process is collapsed, the labels inside the sub-process (such as start, task, and end events) remain visible instead of being hidden. Additionally, the labels may move outside the sub-process boundary.

### 2. Analyze the Cause Behind the Wrong Behavior
The problem likely stems from the way the BPMN viewer handles the visibility and positioning of labels when a sub-process is collapsed. The viewer may not be correctly updating the visibility or position of the labels when the sub-process state changes from expanded to collapsed.

### 3. Find Up to 5 Files Most Related to the Cause

```
lib/features/modeling/behavior/ToggleElementCollapseBehaviour.js
lib/features/modeling/behavior/SubProcessPlaneBehavior.js
lib/features/label-editing/LabelEditingProvider.js
lib/features/ordering/BpmnOrderingProvider.js
lib/util/LabelUtil.js
```

**Explanation:**

- **`ToggleElementCollapseBehaviour.js`**: This file manages the collapse and expansion of BPMN sub-process elements. It likely contains the logic for updating the visibility and positioning of labels when a sub-process is collapsed. This file is the most important as it directly handles the collapse behavior.

- **`SubProcessPlaneBehavior.js`**: This file manages the lifecycle of `bpmndi:BPMNPlane` elements associated with collapsed subprocesses. It ensures that these planes are properly synchronized with their subprocesses, which may include managing the visibility of labels.

- **`LabelEditingProvider.js`**: This file manages the direct editing of labels for BPMN elements. It includes functions for checking the state of elements (expanded or collapsed) and updating labels. It may need to be updated to ensure labels are hidden when a sub-process is collapsed.

- **`BpmnOrderingProvider.js`**: This file manages the rendering order of elements in a BPMN diagram. It ensures that labels and groups are rendered on top. It may need to be adjusted to ensure that labels inside a collapsed sub-process are not rendered.

- **`LabelUtil.js`**: This file contains utility functions for handling labels in a BPMN diagram. It includes functions for calculating label positions and determining if a label is external. It may need to be updated to ensure that labels inside a collapsed sub-process are not visible.
