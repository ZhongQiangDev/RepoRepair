### 1. Identify the Wrong Behavior Involved in `GitHub Problem Description`

The wrong behavior described is that labels inside a sub-process remain visible and even move outside the sub-process boundary when the sub-process is collapsed. This is contrary to the expected behavior, where labels inside a collapsed sub-process should be hidden.

### 2. Analyze the Cause Behind the Wrong Behavior

The issue likely stems from the way the BPMN modeler handles the visibility and positioning of labels when a sub-process is collapsed. Specifically, the modeler may not be correctly updating the visibility or position of the labels when the sub-process state changes from expanded to collapsed.

### 3. Examine Each File One by One

#### --- lib/features/modeling/BpmnLayouter.js ---
This file contains no relevant functions/classes.

#### --- lib/features/modeling/behavior/LabelBehavior.js ---
```
file: lib/features/modeling/behavior/LabelBehavior.js
function: LabelBehavior
```
The `LabelBehavior` function is responsible for managing external labels in a BPMN diagram. It ensures labels are synchronized with their associated elements during various operations. This function is relevant because it might need to be updated to handle the visibility of labels when a sub-process is collapsed.

#### --- lib/features/modeling/behavior/ToggleElementCollapseBehaviour.js ---
```
file: lib/features/modeling/behavior/ToggleElementCollapseBehaviour.js
function: ToggleElementCollapseBehaviour
```
The `ToggleElementCollapseBehaviour` function handles the collapse and expansion of BPMN sub-process elements. It includes helper functions like `hideEmptyLabels`, `expandedBounds`, and `collapsedBounds`. This function is directly relevant to the issue because it manages the collapse state of sub-processes and should ensure that labels inside a collapsed sub-process are hidden.

#### --- lib/util/LabelUtil.js ---
```
file: lib/util/LabelUtil.js
function: getExternalLabelBounds
function: getExternalLabelMid
function: getFlowLabelPosition
function: hasExternalLabel
function: isLabelExternal
```
The functions in this file are responsible for calculating the bounds, position, and visibility of labels. They are relevant because they might need to be updated to correctly handle the visibility and positioning of labels when a sub-process is collapsed.

### Summary of Relevant Locations

```
lib/features/modeling/behavior/LabelBehavior.js
function: LabelBehavior

lib/features/modeling/behavior/ToggleElementCollapseBehaviour.js
function: ToggleElementCollapseBehaviour

lib/util/LabelUtil.js
function: getExternalLabelBounds
function: getExternalLabelMid
function: getFlowLabelPosition
function: hasExternalLabel
function: isLabelExternal
```
