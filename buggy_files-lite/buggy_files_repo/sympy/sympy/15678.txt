Let me analyze this step by step:

1. Wrong Behaviors:
- `idiff` fails when using `Eq` to represent equations, throwing an IndexError
- `idiff` fails when using function notation `f(x)` instead of a symbol `y`, raising a ValueError
- The function works correctly with regular expressions using symbol `y`

2. Cause Analysis:
- The `idiff` function in geometry/util.py doesn't properly handle `Eq` objects when differentiating
- It has a validation check that rejects function expressions like `f(x)`, expecting only symbol variables
- The core issue appears to be in the implicit differentiation implementation and symbol validation

3. Most Related Files:
```
sympy/geometry/util.py
sympy/core/expr.py
sympy/solvers/solvers.py
```

Reasoning:
- `sympy/geometry/util.py` is most important as it contains the `idiff` function that needs modification
- `sympy/core/expr.py` is relevant as it handles core expression handling and differentiation
- `sympy/solvers/solvers.py` is included as it contains equation solving utilities that could help with proper `Eq` handling

The fix would primarily involve modifying the `idiff` function in `geometry/util.py` to properly handle `Eq` objects and function expressions.
