Let me analyze this step by step:

1. Wrong Behavior:
- viewcode creates pages for epub even when `viewcode_enable_epub=False` is set during `make html epub` build
- This indicates the viewcode extension is ignoring its configuration setting for EPUB output

2. Cause Analysis:
- The issue likely stems from the viewcode extension not properly checking the `viewcode_enable_epub` configuration value when generating pages
- The extension is probably treating EPUB builds the same as HTML builds, ignoring the specific EPUB disable flag
- This suggests the core issue is in the viewcode extension's page collection and generation logic

3. Most Related Files:
```
sphinx/ext/viewcode.py
sphinx/builders/epub3.py
sphinx/registry.py
```

Reasoning:
- `sphinx/ext/viewcode.py` is the most important as it contains the core viewcode extension code and configuration handling
- `sphinx/builders/epub3.py` is relevant as it handles EPUB building and would interact with the viewcode extension
- `sphinx/registry.py` is included as it manages extension registration and configuration, which could affect how the viewcode settings are handled

These files would need to be modified to ensure the viewcode extension properly respects the `viewcode_enable_epub` configuration setting during EPUB builds.
