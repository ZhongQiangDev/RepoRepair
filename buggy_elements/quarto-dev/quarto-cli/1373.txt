### 1. Identify the Wrong Behavior Involved in `GitHub Problem Description`

The wrong behavior described is that the `code-tools` menu does not show up when the `source` parameter is set to a URL (e.g., `https://github.com/quarto-dev/quarto-web/blob/main/index.md`). However, when `source: true` is used, the `code-tools` menu appears as expected.

### 2. Analyze the Cause Behind the Wrong Behavior

The issue likely stems from how the `code-tools` function handles the `source` parameter when it is a URL versus a boolean value. When `source` is a URL, the function may not correctly interpret or process the URL, leading to the absence of the `code-tools` menu. This could be due to a lack of proper URL handling, validation, or fetching of the source content from the URL.

### 3. Examine Each File One by One

#### --- src/command/render/codetools.ts ---

This file contains relevant functions that need to be inspected:

```
src/command/render/codetools.ts
function: CodeTools
function: codeToolsPostprocessor
function: resolveCodeTools
function: keepSourceBlock
function: resolveKeepSource
```

- **`CodeTools`**: This function defines the properties for code tools, including the `source` property which can be a boolean or a string (URL). The issue might be related to how the `source` property is handled when it is a URL.
- **`codeToolsPostprocessor`**: This function processes the HTML document based on the `format` configuration. It might need to handle the URL-based `source` differently to ensure the `code-tools` menu is displayed.
- **`resolveCodeTools`**: This function constructs the `codeToolsResolved` object and validates the `source` property. It might need to be updated to handle URL-based `source` values correctly.
- **`keepSourceBlock`**: This function reads and processes the source code based on the `source` parameter. It might need to handle URL-based `source` values to fetch and process the source code correctly.
- **`resolveKeepSource`**: This function checks if the source code should be retained based on various conditions. It might need to consider URL-based `source` values.

#### --- src/core/handlers/base.ts ---

```
This file contains no relevant functions/classes.
```

#### --- src/core/lib/yaml-intelligence/hover.ts ---

```
This file contains no relevant functions/classes.
```

#### --- src/project/project-context.ts ---

```
This file contains no relevant functions/classes.
```

#### --- src/quarto-core/inspect.ts ---

```
This file contains no relevant functions/classes.
```
