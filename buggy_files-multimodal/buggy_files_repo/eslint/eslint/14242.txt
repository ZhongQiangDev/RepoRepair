Let me analyze this step by step:

1. Wrong Behavior:
- When using `--max-warnings` with `--quiet` flag, the warnings are not logged even when they exceed the max-warnings threshold
- The exit code should be 1 when max-warnings is exceeded, but it's not happening with --quiet flag

2. Cause Analysis:
- The `--quiet` flag is suppressing all warnings, including those that would trigger the max-warnings threshold
- The max-warnings check is likely happening after warnings are filtered out by the quiet flag
- This suggests an ordering issue in how these flags are processed in the CLI logic

3. Most Related Files:
```
lib/cli.js
bin/eslint.js
lib/cli-engine/cli-engine.js
lib/shared/logging.js
lib/cli-engine/formatters/unix.js
```

Reasoning:
- `lib/cli.js` is most important as it handles CLI options processing and execution flow, including --quiet and --max-warnings flags
- `bin/eslint.js` is the entry point that processes command line arguments and initializes the CLI
- `lib/cli-engine/cli-engine.js` contains core linting logic and result processing
- `lib/shared/logging.js` handles warning output which is affected by the --quiet flag
- `lib/cli-engine/formatters/unix.js` deals with formatting output including warnings

The fix would likely need to modify how warnings are counted and checked against max-warnings before the --quiet flag filters them out in `lib/cli.js`.
