Let me help analyze this issue.

1. Wrong Behavior:
- When using the Data Table's search functionality and then clicking "Select All", it selects ALL rows in the table instead of just the filtered/visible rows.
- Expected: Only the filtered/visible rows should be selected
- Actual: All rows (including hidden/filtered ones) are being selected

2. Cause Analysis:
- The issue appears to be in the selection logic of the DataTable component
- When "Select All" is clicked, it's operating on the full dataset rather than the filtered subset
- The selection state management isn't properly considering the current filtered state when handling batch selection

3. Most Related Files:
```
packages/react/src/components/DataTable/DataTable.js
packages/react/src/internal/Selection.js
packages/react/src/components/DataTable/state/sorting.js
packages/react/src/components/DataTable/tools/filter.js
packages/react/src/components/DataTable/tools/denormalize.js
```

These files are ordered by importance because:

1. DataTable.js is the main component file that handles the core table functionality including selection logic
2. Selection.js manages the selection state and operations
3. sorting.js contains state management code that could affect how filtered rows are handled
4. filter.js contains the filtering logic that should be considered when selecting rows
5. denormalize.js handles data structure transformations that could impact how filtered rows are processed

The fix would likely need to modify the selection logic in DataTable.js to consider the current filtered state when handling "Select All" operations, ensuring only visible rows are affected.
