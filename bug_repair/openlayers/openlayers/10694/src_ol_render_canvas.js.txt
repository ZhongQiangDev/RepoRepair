```javascript
### src/ol/render/canvas.js
<<<<<<< SEARCH
export function drawImageOrLabel(context,
  transform, opacity, labelOrImage, originX, originY, w, h, x, y, scale) {
  context.save();

  if (transform) {
    context.setTransform.apply(context, transform);
  }

  if ((/** @type {*} */ (labelOrImage).contextInstructions)) {
    // label
    context.translate(x, y);
    context.scale(scale, scale);
    executeLabelInstructions(/** @type {Label} */ (labelOrImage), context);
  } else {
    // image
    context.drawImage(/** @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} */ (labelOrImage), originX, originY, w, h, x, y, w * scale, h * scale);
  }

  context.restore();
}
=======
export function drawImageOrLabel(context,
  transform, opacity, labelOrImage, originX, originY, w, h, x, y, scale) {
  context.save();

  if (transform) {
    context.setTransform.apply(context, transform);
  }

  context.globalAlpha = opacity; // Apply opacity to the context

  if ((/** @type {*} */ (labelOrImage).contextInstructions)) {
    // label
    context.translate(x, y);
    context.scale(scale, scale);
    executeLabelInstructions(/** @type {Label} */ (labelOrImage), context);
  } else {
    // image
    context.drawImage(/** @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} */ (labelOrImage), originX, originY, w, h, x, y, w * scale, h * scale);
  }

  context.restore();
}
>>>>>>> REPLACE
```
