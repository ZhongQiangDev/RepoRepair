```javascript
### src/ol/render/canvas/hitdetect.js
<<<<<<< SEARCH
const imgSize = image.getImageSize();
if (!imgSize) {
  continue;
}

const canvas = document.createElement('canvas');
canvas.width = imgSize[0];
canvas.height = imgSize[1];
const imgContext = canvas.getContext('2d', {alpha: false});
imgContext.fillStyle = color;
const img = imgContext.canvas;
imgContext.fillRect(0, 0, img.width, img.height);
const width = imgSize ? imgSize[0] : img.width;
const height = imgSize ? imgSize[1] : img.height;
const iconContext = createCanvasContext2D(width, height);
iconContext.drawImage(img, 0, 0);
style.setImage(
  new Icon({
    img: img,
    imgSize: imgSize,
    anchor: image.getAnchor(),
    anchorXUnits: IconAnchorUnits.PIXELS,
    anchorYUnits: IconAnchorUnits.PIXELS,
    offset: image.getOrigin(),
    size: image.getSize(),
    opacity: image.getOpacity(),
    scale: image.getScale(),
    rotation: image.getRotation(),
    rotateWithView: image.getRotateWithView(),
  })
);
=======
const imgSize = image.getImageSize();
if (!imgSize) {
  continue;
}

const canvas = document.createElement('canvas');
canvas.width = imgSize[0];
canvas.height = imgSize[1];
const imgContext = canvas.getContext('2d', {alpha: false});
imgContext.fillStyle = color;
const img = imgContext.canvas;
imgContext.fillRect(0, 0, img.width, img.height);
const width = imgSize ? imgSize[0] : img.width;
const height = imgSize ? imgSize[1] : img.height;
const iconContext = createCanvasContext2D(width, height);
iconContext.drawImage(img, 0, 0);
style.setImage(
  new Icon({
    img: img,
    imgSize: imgSize,
    anchor: image.getAnchor(),
    anchorXUnits: IconAnchorUnits.PIXELS,
    anchorYUnits: IconAnchorUnits.PIXELS,
    offset: image.getOrigin(),
    size: image.getSize(),
    opacity: image.getOpacity(),
    scale: Math.abs(image.getScale()), // Ensure scale is positive for rendering
    rotation: image.getRotation(),
    rotateWithView: image.getRotateWithView(),
  })
);
>>>>>>> REPLACE
```
