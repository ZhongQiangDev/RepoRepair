The issue described involves labels inside a sub-process not being hidden when the sub-process is collapsed. The problem seems to be related to the logic that determines whether labels should be displayed or hidden based on the state of the sub-process (expanded or collapsed).

To address this, we need to ensure that the labels inside a sub-process are hidden when the sub-process is collapsed. This can be achieved by modifying the `isLabelExternal` function to consider the state of the sub-process.

Here's the proposed fix:

```javascript
### lib/util/LabelUtil.js
<<<<<<< SEARCH
/**
 * Returns true if the given semantic has an external label
 *
 * @param {BpmnElement} semantic
 * @return {boolean} true if has label
 */
export function isLabelExternal(semantic) {
  return is(semantic, 'bpmn:Event') ||
         is(semantic, 'bpmn:Gateway') ||
         is(semantic, 'bpmn:DataStoreReference') ||
         is(semantic, 'bpmn:DataObjectReference') ||
         is(semantic, 'bpmn:DataInput') ||
         is(semantic, 'bpmn:DataOutput') ||
         is(semantic, 'bpmn:SequenceFlow') ||
         is(semantic, 'bpmn:MessageFlow') ||
         is(semantic, 'bpmn:Group');
}
=======
/**
 * Returns true if the given semantic has an external label
 *
 * @param {BpmnElement} semantic
 * @return {boolean} true if has label
 */
export function isLabelExternal(semantic) {
  if (is(semantic, 'bpmn:SubProcess') && semantic.collapsed) {
    return false;
  }
  return is(semantic, 'bpmn:Event') ||
         is(semantic, 'bpmn:Gateway') ||
         is(semantic, 'bpmn:DataStoreReference') ||
         is(semantic, 'bpmn:DataObjectReference') ||
         is(semantic, 'bpmn:DataInput') ||
         is(semantic, 'bpmn:DataOutput') ||
         is(semantic, 'bpmn:SequenceFlow') ||
         is(semantic, 'bpmn:MessageFlow') ||
         is(semantic, 'bpmn:Group');
}
>>>>>>> REPLACE
```

This modification checks if the semantic element is a collapsed sub-process and returns `false` in that case, ensuring that labels inside a collapsed sub-process are not displayed.
